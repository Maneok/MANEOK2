{% comment %}
This file is auto-generated by PageFly. The content can be overridden when publish page in PageFly. Please do not update this file directly.
If you plan to remove PageFly, please see the guide in our help center first: https://help.pagefly.io/.
{% endcomment %}
<style>.recap-wrapper{display:flex;flex-direction:column;align-items:center;padding:2rem 1rem;background:linear-gradient(to bottom,#fffefb,#f9f7f3)}.theme-preview{width:100%;max-width:720px;margin-bottom:2rem}.recap-card{background:#fff;border-radius:16px;box-shadow:0 12px 24px rgba(0,0,0,.05)}.recap-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;font-size:15px}.recap-row .label{font-weight:600;color:#000;text-transform:uppercase}.recap-row .value{color:#000;font-weight:500;text-align:right;display:flex;align-items:center;gap:.5rem}.flag{height:auto;box-shadow:0 1px 3px rgba(0,0,0,.1)}.primary-btn{margin-top:2rem;padding:.9rem 2rem;background-color:#bda36c;border:none;border-radius:12px;color:#fff;font-size:1rem;font-weight:600;cursor:pointer;transition:background-color .3s}.primary-btn:hover{background-color:#a88f5c}:root{--c-label:#000000;--c-value:#222;--fs-label:clamp(0.75rem, 1.5vw, 0.9rem);--fs-value:clamp(0.8rem, 1.6vw, 1rem);--radius-card:1rem}.recap-card{width:100%;max-width:640px;border-radius:var(--radius-card);padding:1.75rem 2rem;box-shadow:0 8px 20px rgba(0,0,0,.05)}.recap-row{display:grid;grid-template-columns:1fr auto;gap:.75rem 1.5rem;align-items:center;font-size:var(--fs-label);line-height:1.4;border-bottom:1px solid #f1f1f1;padding-block:.6rem}.recap-row:last-child{border-bottom:0}.label{color:var(--c-label);font-weight:600;letter-spacing:.03em}.value{color:var(--c-value);font-weight:500;font-size:var(--fs-value);text-align:right;display:flex;align-items:center;gap:.4rem}.flag{width:20px;border-radius:3px;box-shadow:0 0 0 1px #ddd}@media (max-width:480px){.recap-row{grid-template-columns:1fr}.value{text-align:left}}.center-button{display:flex;justify-content:center}</style><div data-pf-editor-version="legacy" class="sc-ktJcvw iZCSon __pf __pf_6EZkyXLk" id="__pf"><div data-pf-type="Body" class="sc-fAGzVM kCwfYM pf-10_"><div data-pf-type="Layout" class="sc-bJBfJu gmOWvi pf-11_"><div data-section-id="pf-e9e0" data-pf-type="Section" class="sc-dJjagV cQqdEF pf-13_ pf-color-scheme-1"><div style="--cw:1170px" class="sc-kCMLfs khbiTF"><div class="sc-hzhKNl fltMam pf-14_ pf-r pf-r-eh" style="--s-xs:8px;--s-sm:15px" data-pf-type="Row"><div class="pf-c pf-hide" style="--c-xs:12;--c-sm:2;--c-md:1;--c-lg:1"><div data-pf-type="Column" class="sc-bkSTSn hpQOMO pf-15_ pf-hide"></div></div><div class="pf-c" style="--c-xs:12;--c-sm:8;--c-md:10;--c-lg:10"><div data-pf-type="Column" class="sc-bkSTSn hpQOMO pf-16_"><h3 data-pf-type="Heading2" class="sc-kRRxPL kSaugo pf-17_ pf-heading-1-h3">Synthèse de <br>ton site</h3></div></div><div class="pf-c pf-hide" style="--c-xs:12;--c-sm:2;--c-md:1;--c-lg:1"><div data-pf-type="Column" class="sc-bkSTSn hpQOMO pf-19_ pf-hide"></div></div></div></div></div><div data-section-id="pf-b2e5" data-pf-type="Section" class="sc-dJjagV cQqdEF pf-20_ pf-color-scheme-1"><div style="--cw:1170px" class="sc-kCMLfs khbiTF"><div class="sc-hzhKNl fltMam pf-21_ pf-r pf-r-eh" style="--s-xs:8px;--s-sm:15px" data-pf-type="Row"><div class="pf-c" style="--c-xs:1;--c-sm:6;--c-md:4;--c-lg:4"><div data-pf-type="Column" class="sc-bkSTSn hpQOMO pf-22_"></div></div><div class="pf-c" style="--c-xs:10;--c-sm:6;--c-md:4;--c-lg:4"><div data-pf-type="Column" class="sc-bkSTSn hpQOMO pf-23_"><div data-pf-type="Custom.HTML" class="sc-fulBNO eZelYR pf-24_"><div id="theme-preview" class="theme-banner" style="margin-bottom: 24px;"></div></div></div></div><div class="pf-c" style="--c-xs:1;--c-sm:12;--c-md:4;--c-lg:4"><div data-pf-type="Column" class="sc-bkSTSn hpQOMO pf-25_"></div></div></div><div class="sc-hzhKNl fltMam pf-26_ pf-r pf-r-eh" style="--s-xs:15px" data-pf-type="Row"><div class="pf-c" style="--c-xs:12;--c-sm:12;--c-md:12;--c-lg:12"><div data-pf-type="Column" class="sc-bkSTSn hpQOMO pf-27_"><div class="sc-ecPDsT iZHDqZ pf-28_ pf-countdown__outter2" data-translation="{&quot;startTime&quot;:&quot;2025-06-06T17:19:05.693Z&quot;,&quot;endTime&quot;:&quot;2025-06-06T17:19:05.693Z&quot;,&quot;version&quot;:&quot;ee4db313&quot;,&quot;countdownType&quot;:&quot;every&quot;,&quot;repeat&quot;:&quot;never&quot;,&quot;endType&quot;:&quot;period&quot;,&quot;endPeriod&quot;:140,&quot;redirectUrl&quot;:{&quot;on&quot;:false},&quot;hideIfInactive&quot;:false,&quot;label&quot;:{&quot;on&quot;:true,&quot;reverse&quot;:false},&quot;timeData&quot;:{&quot;w&quot;:{&quot;on&quot;:false,&quot;text&quot;:&quot;Weeks&quot;},&quot;d&quot;:{&quot;on&quot;:false,&quot;text&quot;:&quot;Days&quot;},&quot;h&quot;:{&quot;on&quot;:false,&quot;text&quot;:&quot;Hours&quot;},&quot;m&quot;:{&quot;on&quot;:true,&quot;text&quot;:&quot;Mins&quot;},&quot;s&quot;:{&quot;on&quot;:true,&quot;text&quot;:&quot;Secs&quot;}},&quot;classGlobalStyling&quot;:&quot;&quot;}" style="visibility:hidden" data-pf-type="CountDown"><div class="pf-countdown__inner"><div class="m"><span data-pf-type="CountdownNumber" class="sc-kzqdYt kOLxBk pf-29_">00</span><label data-pf-type="CountdownLabel" class="sc-gdyfxU kaVeqo pf-30_">Secs</label></div><div class="pf-countdown__colon"><span>:</span></div><div class="s"><span data-pf-type="CountdownNumber" class="sc-kzqdYt kOLxBk pf-29_">00</span><label data-pf-type="CountdownLabel" class="sc-gdyfxU kaVeqo pf-30_">Secs</label></div></div></div></div></div></div><div class="sc-hzhKNl fltMam pf-31_ pf-r pf-r-eh" style="--s-xs:15px" data-pf-type="Row"><div class="pf-c" style="--c-xs:12;--c-sm:12;--c-md:12;--c-lg:12"><div data-pf-type="Column" class="sc-bkSTSn hpQOMO pf-32_"><div data-pf-type="Custom.HTML" class="sc-fulBNO eZelYR pf-33_"><!-- RÉCAPITULATIF – Page 6 -->
<link rel="stylesheet" href="recap.css">

<div class="recap-wrapper pf-color-scheme-2">

  <!-- aperçu du thème choisi -->
  <div id="theme-preview" class="theme-preview placeholder"></div>

  <!-- tableau récapitulatif -->
  <div class="recap-card">
    <div class="recap-row">
      <span class="label">Langue du site :</span>
      <span class="value">
        <img id="flag" class="flag hidden" alt="">
        <span id="recap-lang"></span>
      </span>
    </div>

    <div class="recap-row">
      <span class="label">Nom de la boutique :</span>
      <span class="value" id="recap-name"></span>
    </div>

    <div class="recap-row">
      <span class="label">Activité :</span>
      <span class="value" id="recap-activity"></span>
    </div>

    <div class="recap-row">
      <span class="label">Audience cible :</span>
      <span class="value" id="recap-audience"></span>
    </div>

    <div class="recap-row">
      <span class="label">Nom de domaine :</span>
      <span class="value" id="recap-domain"></span>
    </div>
  </div>

</div></div></div></div><div class="sc-hzhKNl fltMam pf-34_ pf-r pf-r-eh" style="--s-xs:15px" data-pf-type="Row"><div class="pf-c" style="--c-xs:12;--c-sm:12;--c-md:12;--c-lg:12"><div data-pf-type="Column" class="sc-bkSTSn hpQOMO pf-35_"><div data-product-id="10019327410513" data-default-variant="50765752140113" data-pf-type="ProductBox" class="sc-enkJyZ dMMyzv pf-36_">{% assign defaultProduct = product %}{% assign product = product_10019327410513 %}{% if product != null %}{% form "product", product, data-productid: product.id, class: "pf-product-form" %}<div class="sc-hzhKNl fltMam pf-37_ pf-r pf-r-eh" style="--s-xs:15px" data-pf-type="Row"><div class="pf-c" style="--c-xs:12;--c-sm:12;--c-md:12;--c-lg:12"><div data-pf-type="Column" class="sc-bkSTSn hpQOMO pf-38_"><div data-pf-type="Block" class="sc-dGCntx NmQIv pf-39_"><button data-product-id="{{ product.id }}" data-checkout="same" data-soldout="Sold out" data-adding="En cours..." data-added="Merci" type="button" data-pf-type="ProductATC" class="sc-huFOms hXHKut pf-40_ center-button animate-shrink"><span data-pf-type="Text" class="sc-fmzxHC hSXinz pf-42_">Finaliser</span></button></div></div></div></div>{% endform %}{% endif %}{% assign product = defaultProduct %}</div></div></div></div></div></div></div></div></div><script>
    !function(){
      window.__pagefly_page_setting__ = {"pageTitle":"7. SYNTHESE","pageType":"page","pageId":"4b93983d-e290-4c23-93f7-4314f79bb7b5","lazyLoad":false,"forceByPassGoogleLightHouse":false,"imageLazyLoad":false,"nativeImageLazyLoad":true,"useThemeJQ":false,"sectionRootType":"Section","trackingIDs":[{"elementIndex":40,"elementId":"995ad0c7-d4d7-43db-ab26-23e5e069bb8a","elementType":"ProductATC","elementName":"ProductATC"}]};
      window.__pagefly_setting__&&(window.__pagefly_setting2__=window.__pagefly_setting__),window.__pagefly_setting__={"baseURL":"https://apps.pagefly.io","analyticsURL":"https://analytics.pagefly.io","isBackend":false,"cdnURL":"https://cdn.pagefly.io","pageflyVersion":"4.23.6","shopDomain":"futuryia.myshopify.com","elementData":{"pf-40_":{"iconPos":"left","id":"995ad0c7-d4d7-43db-ab26-23e5e069bb8a","_type":"ProductATC"}},"shopifyProxyPath":"/apps/pagefly"},window.__pagefly_setting2__&&(window.__pagefly_setting__=function _(d,b){let c={...d||{}};for(let a of Object.keys(b))b[a]instanceof Object&&(Array.isArray(b[a])&&c[a]?Object.assign(b[a],[...b[a],...c[a]]):Object.assign(b[a],_(c[a],b[a])));return Object.assign(c||{},b),c}(__pagefly_setting2__,__pagefly_setting__),delete window.__pagefly_setting2__),window.__pagefly_setting__.moneyFormat={{shop.money_format|json}}}();
    </script><script>/* ------------------------------------------------------------------
   Page 6 – Synthèse finale : injection des données et validation
------------------------------------------------------------------ */
document.addEventListener('DOMContentLoaded', () => {
  /* ---- 1. Constantes LS --------------------------------------- */
  const LS_LANG = 'site_language';
  const LS_COMPANY = 'company_info';
  const LS_DOMAIN = 'domain_info';

  /* ---- 2. Helpers DOM ---------------------------------------- */
  const $ = sel => document.querySelector(sel);

  /* ---------------------------------------------------------------
    PAGE 6 – Récapitulatif (langue + infos société + domaine + thème)
    Toute la data provient du localStorage (pages 1 → 4)
 -----------------------------------------------------------------*/
  (() => {
    /* ---------- 1. Keys localStorage ---------- */
    const LS_THEME = 'theme_selection';
    const LS_LANG = 'site_language';
    const LS_COMPANY = 'company_info';
    const LS_DOMAIN = 'domain_info';

    /* ---------- 2. Tableau des iframes Canva (theme 1 → 30) ---------- */
    const EMBEDS = {
      theme1: 'https://www.canva.com/design/DAGgmQr4Jus/bt_ZtJDx43NXlAeWP4e4bA/view?embed',
      theme2: 'https://www.canva.com/design/DAGgmfEgJUI/vMI4NFrx3AmjWNcJhzU06w/view?embed',
      theme3: 'https://www.canva.com/design/DAGgmVlXj3k/PdA8OOlv1fM8U1BaiLXxYg/view?embed',
      theme4: 'https://www.canva.com/design/DAGgtBBfgxE/v21F7Z7tkMNdvghVGADjcw/view?embed',
      theme5: 'https://www.canva.com/design/DAGgtWxfIjo/WHQoOfgo2ZEBIE-fNHOH9A/view?embed',
      theme6: 'https://www.canva.com/design/DAGgteH_VTE/0Eoxjm7tISl7Vvd7ll2Dng/view?embed',
      theme7: 'https://www.canva.com/design/DAGgtamvFhs/sTwihagKCvJ0T_mDBzfrvg/view?embed',
      theme8: 'https://www.canva.com/design/DAGgtYdQ2kI/WOb1ribp6wuNuwDUdkI2Ng/view?embed',
      theme9: 'https://www.canva.com/design/DAGgtbDmsdM/QKP8NKNRA_EKLBC4R70p-g/view?embed',
      theme10: 'https://www.canva.com/design/DAGgtOEql2E/0C3fTxWrh1fW6rlxiQqR4Q/view?embed',
      theme11: 'https://www.canva.com/design/DAGgtSRfoBM/qw5be6DKp7ZJz4wfgs0_hQ/view?embed',
      theme12: 'https://www.canva.com/design/DAGgtNdgzB8/MeqZQDEvN7ocDROLGJiAlg/view?embed',
      theme13: 'https://www.canva.com/design/DAGgfxgNZTo/6YALSuuX662V_nMumqgFUA/view?embed',
      theme14: 'https://www.canva.com/design/DAGgmb3LlBM/jG6GccRkFesayB1F5GzYqw/view?embed',
      theme15: 'https://www.canva.com/design/DAGgmSEeoIk/pR9JR3Be1dIrx7D9WIlYnQ/view?embed',
      theme16: 'https://www.canva.com/design/DAGgmQNt7Fw/5YwhqW4iGY-QeDRwOUvcKw/view?embed',
      theme17: 'https://www.canva.com/design/DAGgmWiQXPc/91ZWWXvXz0DCBFpA5QTmKg/view?embed',
      theme18: 'https://www.canva.com/design/DAGgmT8FJcQ/hfsFZnTvdAE_uCwoig4OSw/view?embed',
      theme19: 'https://www.canva.com/design/DAGgmZwsWHY/nG4pGDI8nnuabxo2r2uJMA/view?embed',
      theme20: 'https://www.canva.com/design/DAGgmcczbRg/nslVGtYee56JqzQw9rGrzw/view?embed',
      theme21: 'https://www.canva.com/design/DAGgmV3Q2Og/1GlOubG-V_fF8BXDFXAzQg/view?embed',
      theme22: 'https://www.canva.com/design/DAGgmc9gD48/d3EoZQemDB6dB74gc19FVQ/view?embed',
      theme23: 'https://www.canva.com/design/DAGlDhItaGw/M6WbaHa_qSOlPIEiTnpxpQ/view?embed',
      theme24: 'https://www.canva.com/design/DAGlDmIy3n0/M57fEobnL7L63KlyYQB8ag/view?embed',
      theme25: 'https://www.canva.com/design/DAGgmaQ9RyE/UzDXARWyApWpRchn4Y46PQ/view?embed',
      theme26: 'https://www.canva.com/design/DAGgtCZS5Yk/sK5cNyNFKmsXRn9Q953bvQ/view?embed',
      theme27: 'https://www.canva.com/design/DAGgtD1ZwmU/9DVA2x81N7pdmBxNl_t18w/view?embed',
      theme28: 'https://www.canva.com/design/DAGgtUM3uvU/uX2s2d8TinpabswNHG2n6A/view?embed',
      theme29: 'https://www.canva.com/design/DAGgtB6VV1E/toB7ZptYQ1QC7uwIl8_bpg/view?embed',
      theme30: 'https://www.canva.com/design/DAGgtUM3uvU/uX2s2d8TinpabswNHG2n6A/view?embed'
    };

    /* ---------- 3. Helpers DOM ---------- */
    const $ = s => document.querySelector(s);

    /* ---------- 4. Rendu thème ---------- */
    function renderTheme() {
      const id = localStorage.getItem(LS_THEME);
      const box = $('#theme-preview');
      if (!box) return;

      if (id && EMBEDS[id]) {
        box.innerHTML =
          `<iframe src="${EMBEDS[id]}" loading="lazy" allowfullscreen
                 style="width:100%;aspect-ratio:16/9;border:0;border-radius:8px;"></iframe>`;
        box.classList.remove('placeholder');
      } else {
        box.textContent = 'Aucun thème sélectionné.';
      }
    }

    /* ---------- 5. Injection des données ---------- */
    function renderRecap() {
      const lang = localStorage.getItem(LS_LANG) || '—';
      const comp = JSON.parse(localStorage.getItem(LS_COMPANY) || '{}');
      const domInfo = JSON.parse(localStorage.getItem(LS_DOMAIN) || '{}');

      /* ligne domaine */
      let domainLine = '—';
      if (domInfo.hasDomain === 'oui' && domInfo.existing) {
        domainLine = `Domaine existant : ${domInfo.existing}`;
      } else if (domInfo.hasDomain === 'non' && domInfo.suggested) {
        domainLine = `Suggestion retenue : ${domInfo.suggested}`;
      }

      /* mapping ID → valeur */
      const map = {
        '#recap-lang': lang,
        '#recap-name': comp.name || '—',
        '#recap-activity': comp.activity || '—',
        '#recap-audience': comp.audience || '—',
        '#recap-size': comp.companySize || '—',
        '#recap-domain': domainLine
      };

      Object.entries(map).forEach(([sel, val]) => {
        const el = $(sel);
        if (el) el.textContent = val;
      });
    }

    /* ---------- 6. Sync multi-onglets / BFCache ---------- */
    window.addEventListener('storage', e => {
      if (e.key === LS_THEME) renderTheme();
      if ([LS_LANG, LS_COMPANY, LS_DOMAIN].includes(e.key)) renderRecap();
    });

    window.addEventListener('pageshow', () => {
      renderTheme();
      renderRecap();
    });

    /* ---------- 7. RUN ---------- */
    document.addEventListener('DOMContentLoaded', () => {
      renderTheme();
      renderRecap();
    });
  })();


  /* Nom de domaine : phrase automatique */
  let domainLine = '—';
  if (domain.hasDomain === 'oui' && domain.existing) {
    domainLine = `Vous possédez déjà : ${domain.existing}`;
  } else if (domain.hasDomain === 'non' && domain.suggested) {
    domainLine = `Suggestion retenue : ${domain.suggested}`;
  }
  $('#recap-domain').textContent = domainLine;

  /* ---- 4. Validation bouton ---------------------------------- */
  const btn = $('#recap-confirm');
  const ready =
    company.name &&
    company.activity &&
    company.audience &&
    company.companySize &&
    ((domain.hasDomain === 'oui' && domain.existing) ||
      (domain.hasDomain === 'non' && domain.suggested));

  btn.disabled = !ready;

  /* ---- 5. Action “Ajouter au panier” -------------------------- */
  btn.addEventListener('click', () => {
    if (btn.disabled) return;

    /* Ici tu peux :
       - déclencher un add-to-cart Shopify (fetch /cart/add.js …)
       - ou simplement rediriger vers ta page de paiement / panier.
       Exemple minimal : */
    alert('✅ Vos informations ont été confirmées !\nLe produit est ajouté au panier.');
    /* window.location.href = '/cart'; */
  });
});



/* ---------------------------------------------------------------
   PAGE 6 – Récapitulatif client (langue / société / domaine / thème)
-----------------------------------------------------------------*/
(() => {
  /* Keys LocalStorage */
  const LS_THEME = 'theme_selection';
  const LS_LANG = 'site_language';
  const LS_COMPANY = 'company_info';
  const LS_DOMAIN = 'domain_info';

  /* Iframes Canva (1→30) */
  const EMBEDS = { /* … voir bloc complet déjà fourni … */ };

  /* Flags ISO → CDN (48 × 36 px) */
  const FLAG_MAP = {
    fr: 'fr', en: 'gb', es: 'es', de: 'de', it: 'it', pt: 'pt', nl: 'nl',
    ru: 'ru', jp: 'jp', cn: 'cn'
  };
  const flagURL = code => `https://flagcdn.com/48x36/${code}.png`;

  /* Helpers DOM */
  const $ = s => document.querySelector(s);

  /* ---------- Render Theme ---------- */
  function renderTheme() {
    const id = localStorage.getItem(LS_THEME);
    const box = $('#theme-preview');
    if (!box) return;

    box.innerHTML = id && EMBEDS[id]
      ? `<iframe src="${EMBEDS[id]}" loading="lazy" allowfullscreen
           style="width:100%;aspect-ratio:16/9;border:0;border-radius:10px;"></iframe>`
      : 'Aucun thème sélectionné.';
  }

  /* ---------- Render Recap ---------- */
  function renderRecap() {
    const lang = (localStorage.getItem(LS_LANG) || '—').toLowerCase();
    const comp = JSON.parse(localStorage.getItem(LS_COMPANY) || '{}');
    const domain = JSON.parse(localStorage.getItem(LS_DOMAIN) || '{}');

    /* drapeau */
    const flag = $('#flag');
    const iso = FLAG_MAP[lang];
    if (flag && iso) { flag.src = flagURL(iso); flag.alt = lang; flag.classList.remove('hidden'); }

    /* domaine */
    let domainLine = '—';
    if (domain.hasDomain === 'oui' && domain.existing) {
      domainLine = domain.existing;
    } else if (domain.hasDomain === 'non' && domain.suggested) {
      domainLine = domain.suggested;
    }

    /* injection de texte */
    const map = {
      '#recap-lang': lang || '—',
      '#recap-name': comp.name || '—',
      '#recap-activity': comp.activity || '—',
      '#recap-audience': comp.audience || '—',
      '#recap-size': comp.companySize || '—',
      '#recap-domain': domainLine
    };
    for (const [sel, val] of Object.entries(map)) {
      const el = $(sel); if (el) el.textContent = val;
    }
  }

  /* ---------- Sync / BFCache ---------- */
  window.addEventListener('storage', e => {
    if (e.key === LS_THEME) renderTheme();
    if ([LS_LANG, LS_COMPANY, LS_DOMAIN].includes(e.key)) renderRecap();
  });
  window.addEventListener('pageshow', () => { renderTheme(); renderRecap(); });

  /* ---------- RUN ---------- */
  document.addEventListener('DOMContentLoaded', () => {
    renderTheme();
    renderRecap();
  });
})();



(() => {
  const LS_THEME = 'theme_selection';
  const LS_LANG = 'site_language';
  const LS_COMPANY = 'company_info';

  function getData() {
    const theme = localStorage.getItem(LS_THEME);
    const lang = localStorage.getItem(LS_LANG);
    const company = JSON.parse(localStorage.getItem(LS_COMPANY) || '{}');

    return {
      'Langue du site': lang || '-',
      'Nom de la boutique': company.name || '-',
      'Activité': company.activity || '-',
      'Audience cible': company.audience || '-',
      'Nom de domaine': company.domain || '-',
      'Thème': theme || '-'
    };
  }

  async function saveAttributes() {
    const attributes = getData();

    await fetch('/cart/update.js', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ attributes })
    });
  }

  // Automatique dès que l'utilisateur clique sur "Ajouter au panier"
  document.addEventListener('click', async (e) => {
    const isCartBtn = e.target.closest('.shopify-buy__btn, .add-to-cart-btn, button'); // adapte au besoin
    if (isCartBtn) {
      await saveAttributes(); // injecte les données dans le panier
    }
  });
})();





  document.addEventListener('DOMContentLoaded', function() {
  const LS_THEME = 'theme_selection';
  const LS_COMPANY = 'company_info';

  function updateNote() {
    const theme = localStorage.getItem(LS_THEME) || 'Non renseigné';
  const companyInfo = localStorage.getItem(LS_COMPANY) || '{}';
  let companyData = {};
  try {
    companyData = JSON.parse(companyInfo);
    } catch (e) {}

  const noteContent = `
  Thème choisi : ${theme}
  Nom entreprise : ${companyData.name || 'Non renseigné'}
  Description activité : ${companyData.activity || 'Non renseignée'}
  Audience : ${companyData.audience || 'Non renseignée'}
  `.trim();

  fetch('/cart/update.js', {
    method: 'POST',
  headers: {'Content-Type': 'application/json' },
  body: JSON.stringify({note: noteContent })
    }).catch(error => console.error('Erreur en enregistrant la note :', error));
  }

  const addToCartButtons = document.querySelectorAll('form[action^="/cart/add"] button, button.add-to-cart');

  addToCartButtons.forEach(button => {
    button.addEventListener('click', updateNote);
  });
});</script>
{% schema %}
{
  "name": "PageFly Page 4b93983d",
  "settings": [
    {
      "type": "paragraph",
      "content": "For full configuration, [visit PageFly Editor](https://futuryia.myshopify.com/admin/apps/pagefly/editor?id=4b93983d-e290-4c23-93f7-4314f79bb7b5&type=page)."
    }
  ],
  "blocks": [
    {
      "type": "@app"
    }
  ]
}
{% endschema %}